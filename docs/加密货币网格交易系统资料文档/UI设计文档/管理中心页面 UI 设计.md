# 管理中心-代理管理页面 UI 设计文档

## 功能描述

管理中心的代理管理页面是系统管理员管理所有代理账户的专用界面，提供代理用户的创建、编辑、查看和管理功能。管理员可以通过此页面设置佣金比例、查看代理业绩、管理下线用户，以及执行各种管理操作。

## 页面结构

```
┌─────────────────────────────────────────────────────────────┐
│ 管理中心                                                    │
│ 管理代理和用户                                               │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   标签页导航                            │ │
│ │ [代理管理] [用户管理] [交易所管理] [系统设置] [系统监控]  │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   筛选与工具栏                          │ │
│ │                                                         │ │
│ │ [搜索代理...] [级别: 全部 ▼] [状态: 全部 ▼] [+ 添加代理] │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ ┌───────────────────────┐ ┌───────────────────────────────┐ │
│ │                       │ │                               │ │
│ │   代理列表            │ │   代理详情                    │ │
│ │   12位代理            │ │                               │ │
│ │                       │ │ [WM]  王经理                  │ │
│ │ [WM] 王经理  活跃     │ │ wang@example.com              │ │
│ │ 一级代理 | 25个下线   │ │ 注册时间: 2022-12-01         │ │
│ │                       │ │                               │ │
│ │ [LZ] 李总    活跃     │ │ 佣金比例: [30%]    [保存]     │ │
│ │ 一级代理 | 18个下线   │ │                               │ │
│ │                       │ │ [禁用账户] [重置密码]         │ │
│ │ [ZJ] 张经理  不活跃   │ │                               │ │
│ │ 二级代理 | 10个下线   │ │ 总下线用户     总佣金收入     │ │
│ │                       │ │     25           $350.75      │ │
│ │                       │ │ 18个活跃用户    本月: $45.30  │ │
│ │                       │ │                               │ │
│ │                       │ │ [下线用户] [佣金记录] [消息发送]│ │
│ │                       │ │                               │ │
│ │                       │ │ 用户名      注册时间    状态  │ │
│ │                       │ │ John Doe   2023-01-15   活跃  │ │
│ │                       │ │ Alice Wang 2023-01-22   活跃  │ │
│ │                       │ │ Robert Chen 2023-02-05  不活跃│ │
│ │                       │ │ Sarah Lee  2023-02-18   活跃  │ │
│ │ [< 1 2 3 >]           │ │                               │ │
│ └───────────────────────┘ └───────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 功能组件描述

### 1. 页面标题区
- 标题："管理中心"
- 副标题："管理代理和用户"

### 2. 标签页导航
- 标签页组件，包含五个选项卡：
  - 代理管理（当前选中状态）
  - 用户管理
  - 交易所管理
  - 系统设置
  - 系统监控
- 当前选中的标签页底色突出显示

### 3. 筛选与工具栏
- 搜索框：按代理名称或邮箱搜索
- 级别筛选：下拉菜单，选项包括全部、一级代理、二级代理等
- 状态筛选：下拉菜单，选项包括全部、活跃、不活跃、已禁用等
- 添加代理按钮：右对齐，点击后弹出添加代理表单

### 4. 代理列表
- 代理列表项包含：
  - 代理头像/缩写
  - 代理名称
  - 代理状态（活跃/不活跃）
  - 代理级别
  - 下线用户数量
- 当前选中代理高亮显示
- 支持点击选中查看详情
- 分页控件：底部页码导航

### 5. 代理详情面板
#### 5.1 代理资料卡片
- 代理基本信息：
  - 头像/缩写
  - 名称
  - 邮箱
  - 注册时间
- 佣金设置：
  - 佣金比例输入框
  - 保存按钮
- 管理操作按钮：
  - 禁用账户按钮
  - 重置密码按钮

#### 5.2 统计卡片
- 两个关键指标卡片：
  - 总下线用户：总数和活跃用户数
  - 总佣金收入：累计佣金和当月佣金

#### 5.3 内部标签页
- 三个内部标签页：
  - 下线用户：显示该代理的下线用户列表
  - 佣金记录：显示该代理的佣金记录
  - 消息发送：提供向代理或其下线发送消息的功能
- 下线用户表格包含：
  - 用户名
  - 注册时间
  - 状态
  - 策略数
  - 交易量
  - 操作（查看详情）

### 6. 添加代理模态框（触发显示）
- 模态框标题："添加代理"
- 表单字段：
  - 用户名（必填）
  - 电子邮箱（必填）
  - 密码（必填）
  - 代理级别（下拉选择）
  - 佣金比例（百分比输入）
  - 备注（可选文本区域）
- 按钮：
  - 添加：创建新代理账户
  - 取消：关闭模态框

### 7. 消息发送模态框（触发显示）
- 模态框标题："发送消息"
- 收件人选择：
  - 发送给所选代理
  - 发送给所有下线用户
  - 发送给活跃下线用户
- 消息表单：
  - 消息主题
  - 消息内容（富文本编辑器）
- 按钮：
  - 发送：发送消息
  - 取消：关闭模态框

## 交互说明

1. **标签页切换交互**
   - 点击标签页切换不同内容区域
   - 无页面刷新，使用AJAX加载内容
   - 标签页状态保存在URL中，支持直接访问

2. **代理列表交互**
   - 点击代理列表项选中代理
   - 右侧详情面板更新显示选中代理信息
   - 搜索和筛选实时更新列表
   - 分页导航无刷新加载

3. **代理详情交互**
   - 佣金比例修改后点击保存按钮提交
   - 保存成功显示成功提示
   - 内部标签页点击切换内容
   - 禁用账户和重置密码需确认操作

4. **添加代理交互**
   - 点击添加代理按钮弹出模态框
   - 表单实时验证
   - 提交前验证所有必填字段
   - 创建成功后刷新列表并显示成功提示

5. **消息发送交互**
   - 点击消息发送标签页
   - 选择收件人类型
   - 编写消息内容
   - 发送前确认
   - 发送成功显示提示

## 数据需求

1. **代理列表数据结构**
```json
{
  "agents": [
    {
      "id": "agent-uuid",
      "username": "王经理",
      "initials": "WM",
      "email": "wang@example.com",
      "level": 1,
      "status": "active",
      "registration_date": "2022-12-01T10:30:00Z",
      "last_active": "2023-05-20T14:25:30Z",
      "referrals_count": 25,
      "active_referrals_count": 18,
      "commission_rate": 30
    }
    // 更多代理...
  ],
  "pagination": {
    "current_page": 1,
    "total_pages": 3,
    "total_items": 12,
    "items_per_page": 5
  }
}
```

2. **代理详情数据结构**
```json
{
  "agent_id": "agent-uuid",
  "username": "王经理",
  "initials": "WM",
  "email": "wang@example.com",
  "level": 1,
  "status": "active",
  "registration_date": "2022-12-01T10:30:00Z",
  "last_active": "2023-05-20T14:25:30Z",
  "commission_rate": 30,
  "total_commission": 350.75,
  "current_month_commission": 45.30,
  "total_referrals": 25,
  "active_referrals": 18,
  "referrals": [
    {
      "id": "user-uuid",
      "username": "John Doe",
      "email": "john.doe@example.com",
      "status": "active",
      "registration_date": "2023-01-15T10:30:00Z",
      "strategies_count": 5,
      "trading_volume": 5200.00
    }
    // 更多用户...
  ],
  "commission_records": [
    {
      "id": "commission-uuid",
      "amount": 12.50,
      "source_user": "John Doe",
      "source_trade": "trade-uuid",
      "timestamp": "2023-05-15T14:30:00Z",
      "status": "paid"
    }
    // 更多佣金记录...
  ]
}
```

3. **新代理数据结构**
```json
{
  "username": "新代理",
  "email": "newagent@example.com",
  "password": "encrypted_password",
  "level": 1,
  "commission_rate": 25,
  "notes": "市场部招募的新代理"
}
```

## 状态管理

- 标签页状态：当前选中的标签页
- 代理列表状态：搜索关键字、筛选条件、分页信息
- 选中代理状态：当前选中的代理ID
- 详情面板状态：当前显示的内部标签页
- 添加代理模态框状态：显示/隐藏、表单数据、验证状态
- 消息发送模态框状态：显示/隐藏、收件人选择、表单数据

## 响应式设计考虑

- 桌面端：左侧代理列表，右侧详情面板的双栏布局
- 平板端：可切换的列表/详情视图
- 移动端：
  - 单列布局
  - 代理列表和详情分页显示
  - 简化表格为卡片式布局
  - 模态框适应屏幕宽度

## 特殊考虑

- 权限控制：仅系统管理员可访问此页面
- 安全操作：敏感操作（如禁用账户、重置密码）需二次确认
- 佣金比例的限制范围
- 代理级别体系的可扩展性
- 批量操作功能（未来扩展）
- 数据导出和报表生成
- 代理业绩评估和激励机制
- 操作日志记录