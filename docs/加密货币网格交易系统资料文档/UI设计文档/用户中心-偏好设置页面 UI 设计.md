# 用户中心-偏好设置页面 UI 设计文档

## 功能描述

用户偏好设置页面允许用户自定义系统界面外观、通知方式、交易偏好以及安全设置，提供个性化的使用体验。

## 页面结构

```
┌─────────────────────────────────────────────────────────────┐
│ 用户中心                                                     │
│ 自定义您的使用偏好                                           │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   标签页导航                            │ │
│ │ [个人资料] [交易所API] [账户余额] [偏好设置]             │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ ┌─────────────────────────────────────┐ ┌─────────────────┐ │
│ │         界面设置                    │ │    通知设置     │ │
│ │                                     │ │                 │ │
│ │ 主题                                │ │ 通知方式        │ │
│ │ [浅色] [深色] [系统默认]            │ │ □ 浏览器通知    │ │
│ │                                     │ │ □ 邮件通知      │ │
│ │ 语言                                │ │                 │ │
│ │ [简体中文 ▼]                        │ │ 接收通知事件    │ │
│ │                                     │ │ □ 策略启动/停止 │ │
│ │                                     │ │ □ 交易执行      │ │
│ │                                     │ │ □ 风险警报      │ │
│ │                                     │ │ □ 账单和费用    │ │
│ │                                     │ │ □ 系统维护      │ │
│ │                                     │ │ □ 新功能通知    │ │
│ │                                     │ │                 │ │
│ └─────────────────────────────────────┘ └─────────────────┘ │
│                                                             │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   交易偏好                              │ │
│ │                                                         │ │
│ │ 默认交易所                           默认策略类型       │ │
│ │ [Binance ▼]                         [现货做多 ▼]          │ │
│ │                                                         │ │
│ │ 风险偏好                            下单确认             │ │
│ │ [中等风险 ▼]                        [□ 交易前确认]       │ │
│ │                                                         │ │
│ │ 默认网格层数                        图表显示             │ │
│ │ [10 ▼]                              [□ 显示技术指标]     │ │
│ │                                                         │ │
│ │ [保存设置]                                              │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   安全设置                              │ │
│ │                                                         │ │
│ │ 登录验证                                                │ │
│ │ [□ 开启两步验证]  [设置]                                │ │
│ │                                                         │ │
│ │ 登录通知                            交易通知            │ │
│ │ [□ 新设备登录通知]                  [□ 大额交易通知]    │ │
│ │                                                         │ │
│ │ 会话超时                                                │ │
│ │ [30分钟 ▼]                                              │ │
│ │                                                         │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 功能组件描述

### 1. 页面标题区
- 标题："用户中心"
- 副标题："自定义您的使用偏好"

### 2. 标签页导航
- 标签页组件，包含四个选项卡：
  - 个人资料
  - 交易所API
  - 账户余额
  - 偏好设置（当前选中状态）
- 当前选中的标签页底色突出显示

### 3. 界面设置卡片
- 主题选择：
  - 三个选项按钮：浅色、深色、系统默认
  - 选中状态有明显视觉区分
  - 点击即时切换主题
- 语言设置：
  - 下拉选择框
  - 选项包括：简体中文、English、日本語等
  - 更改后需确认应用

### 4. 通知设置卡片
- 通知方式选择：
  - 复选框选项：浏览器通知、邮件通知
  - 可多选
- 接收通知事件：
  - 复选框列表
  - 可选事件：策略启动/停止、交易执行、风险警报等
  - 可多选
  - 不同通知方式可能有不同的事件选项

### 5. 交易偏好卡片
- 默认交易所：下拉选择，显示已添加的交易所
- 默认策略类型：下拉选择，选项包括现货做多、合约做空等
- 风险偏好：下拉选择，选项包括保守、中等风险、激进等
- 下单确认：复选框，选中时交易前需确认
- 默认网格层数：下拉选择，常用层数选项
- 图表显示：复选框，选中时默认显示技术指标
- 保存设置按钮：蓝色主色调按钮

### 6. 安全设置卡片
- 登录验证：
  - 两步验证开关复选框
  - 设置按钮，点击后配置两步验证
- 登录通知：复选框，选中时新设备登录会发送通知
- 交易通知：复选框，选中时大额交易会发送通知
- 会话超时：下拉选择，选项包括各种时间长度

## 交互说明

1. **主题切换**
   - 点击主题选项即时应用
   - 切换时有平滑过渡动画
   - 主题设置保存在本地和用户账户中

2. **语言切换**
   - 选择语言后弹出确认对话框
   - 确认后整页刷新应用新语言
   - 语言设置保存在用户账户中

3. **通知设置**
   - 复选框即时更新设置
   - 可能需要浏览器权限（针对浏览器通知）
   - 更改保存后有成功提示

4. **交易偏好**
   - 所有设置修改后需点击保存按钮
   - 保存成功显示成功提示
   - 设置应用于新创建的策略

5. **安全设置**
   - 开启两步验证需要完成设置流程
   - 设置过程包括：绑定手机或认证器、备份恢复码
   - 会话超时设置即时应用
   - 所有安全设置修改后有确认提示

## 数据需求

1. **用户偏好数据结构**
```json
{
  "interface": {
    "theme": "light",
    "language": "zh-CN"
  },
  "notifications": {
    "browser_notifications": true,
    "email_notifications": true,
    "notify_events": ["strategy_change", "trade_execution", "risk_alert", "billing", "maintenance", "features"]
  },
  "trading": {
    "default_exchange": "binance",
    "default_strategy_type": "spot_long",
    "risk_level": "medium",
    "confirm_orders": true,
    "default_grid_levels": 10,
    "show_technical_indicators": true
  },
  "security": {
    "two_factor_enabled": false,
    "new_device_login_notification": true,
    "large_trade_notification": true,
    "session_timeout_minutes": 30
  }
}
```

## 状态管理

- 偏好设置状态：初始值、修改值、保存状态
- 主题状态：当前主题、切换过渡状态
- 两步验证设置状态：设置流程各步骤状态
- 表单修改状态：标记哪些设置已被修改但未保存

## 响应式设计考虑

- 桌面端：多列卡片布局
- 平板端：双列或单列卡片布局
- 移动端：单列卡片，所有选项垂直排列

## 特殊考虑

- 不同设置项的即时应用与需要保存的区分
- 安全设置的二次确认机制
- 通知权限的获取提示
- 设置项的默认值处理
- 无障碍操作支持
- 国际化与本地化处理