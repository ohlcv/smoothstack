# Cursor AI 大型项目开发工作流

## 前言

本工作流设计用于指导使用 Cursor IDE 与 AI 协作开发大型专业项目，充分考虑了 AI 辅助开发的特点和挑战。它不仅关注技术实现，更重视解决 AI 协作中的核心痛点：上下文维护、项目连贯性、知识管理以及阶段性推进。

## 目录

1. [项目周期与阶段](#1-项目周期与阶段)
2. [项目结构与文档体系](#2-项目结构与文档体系)
3. [AI 状态维护机制](#3-ai-状态维护机制)
4. [文件操作安全策略](#4-文件操作安全策略)
5. [阶段性工作流程](#5-阶段性工作流程)
6. [日常开发工作流](#6-日常开发工作流)
7. [AI 协作增强技术](#7-ai-协作增强技术)
8. [项目质量保障](#8-项目质量保障)
9. [工作流演进与适应](#9-工作流演进与适应)
10. [附录：快速参考](#10-附录快速参考)

## 1. 项目周期与阶段

### 1.1 项目阶段概述

大型项目通常经历以下阶段，每个阶段 AI 的角色和工作方式有所不同：

| 阶段           | 描述                     | AI 主要贡献                               | 关键文档                    |
| -------------- | ------------------------ | ----------------------------------------- | --------------------------- |
| **讨论阶段**   | 项目概念和需求初步形成   | 需求分析、技术选型建议、可行性分析        | 概念文档、需求草稿          |
| **规划阶段**   | 明确项目范围、架构和规格 | 架构设计、API 设计、UI 规划、技术规范制定 | 架构文档、API 规格、UI 设计 |
| **初始化阶段** | 建立项目结构和基础设施   | 项目骨架生成、环境配置、依赖设置          | 项目结构文档、环境配置指南  |
| **开发阶段**   | 功能实现和迭代           | 代码生成、问题解决、测试用例开发          | 开发日志、代码文档          |
| **整合阶段**   | 解决冲突和整合子系统     | 冲突分析、重构建议、性能优化              | 整合报告、性能分析          |
| **评审阶段**   | 代码和功能审查           | 代码审查、测试覆盖分析、安全评估          | 审查报告、测试报告          |
| **发布阶段**   | 准备发布和部署           | 部署脚本生成、文档完善、发布检查清单      | 发布说明、部署指南          |
| **维护阶段**   | 修复问题和小型功能更新   | Bug 分析、补丁开发、小型增强功能          | 维护日志、变更记录          |

### 1.2 阶段转换和标识

为确保 AI 和团队成员清楚了解当前项目阶段：

1. **明确的阶段转换仪式**：
   - 创建阶段转换文档记录项目里程碑
   - 更新项目状态文档标识当前阶段
   - 设置新阶段的具体目标和时间线

2. **阶段标识符**：
   在 AI 状态口令中包含当前阶段标识：
   ```
   [项目代号-阶段代码-状态正常]
   ```
   例如：`[CryptoBot-DEV-状态正常]` 表示处于开发阶段且状态正常

## 2. 项目结构与文档体系

### 2.1 根目录结构

```
ProjectName/
├── docs/                     # 项目文档目录
│   ├── specs/                # 需求规格和设计文档（只读参考）
│   ├── api/                  # API 文档（只读参考）
│   ├── ui/                   # UI 设计文档（只读参考）
│   └── ai_workspace/         # AI 工作区（AI 可读写）
│       ├── index.md          # 文档索引（核心导航文档）
│       ├── recovery/         # 恢复相关文档
│       ├── state/            # 项目状态文档
│       ├── logs/             # 工作日志
│       ├── experience/       # 经验积累
│       └── guides/           # AI 工作指南
├── tests/                    # 测试代码
└── scripts/                  # 工具脚本
```

### 2.2 目录详细说明

#### 2.2.1 `src/` 目录

项目源代码存放位置，组织方式取决于项目技术栈：

- **前端项目**：组件、页面、状态管理、API 客户端等
- **后端项目**：控制器、服务、模型、中间件等
- **全栈项目**：前端和后端子目录分离

#### 2.2.2 `docs/` 目录

项目文档主目录，分为两大类：

1. **只读参考文档**（用户提供的基础设计文档）:
   - `specs/` - 需求和设计规格文档
   - `api/` - API 设计和接口文档
   - `ui/` - UI/UX 设计文档和原型

2. **AI 工作区** (`ai_workspace/`):
   - AI 可读写的工作文档区域
   - 用于维护项目状态、记录工作进展、积累经验

#### 2.2.3 `docs/ai_workspace/` 详细结构

```
ai_workspace/
├── index.md                      # 主索引文档
├── recovery/                     # 恢复相关文档
│   ├── quick_guide.md            # 快速恢复指南
│   └── context_snapshots/        # 上下文快照
│       └── YYYY-MM-DD-phase.md   # 特定日期和阶段的快照
├── state/                        # 项目状态文档
│   ├── current_state.md          # 当前项目状态
│   ├── component_status.md       # 组件完成状态
│   └── roadmap.md                # 项目路线图
├── logs/                         # 工作日志
│   ├── log_index.md              # 日志索引
│   └── YYYY-MM/                  # 按月组织的日志文件夹
│       ├── YYYY-MM-DD.md         # 每日工作日志
│       └── week_summary.md       # 周总结
├── experience/                   # 经验积累
│   ├── experience_index.md       # 经验文档索引
│   ├── technical/                # 技术经验
│   ├── process/                  # 流程经验
│   └── collaboration/            # 协作经验
└── guides/                       # AI 工作指南
    ├── coding_standards.md       # 编码标准
    ├── testing_guide.md          # 测试指南
    └── phase_guides/             # 阶段性工作指南
        └── phase_name_guide.md   # 特定阶段指南
```

### 2.3 关键文档详解

#### 2.3.1 主索引文档 `index.md`

项目文档的"门户"，AI 可通过此文档快速定位所需信息：

```markdown
# 项目文档索引

## 项目概述
- 项目名称：[项目名]
- 当前阶段：[当前阶段]
- 最后更新：[日期]

## 核心文档导航
1. [项目当前状态](./state/current_state.md)
2. [快速恢复指南](./recovery/quick_guide.md)
3. [最新工作日志](./logs/YYYY-MM/YYYY-MM-DD.md)
4. [项目规格文档](../specs/main_spec.md)

## 参考文档（只读）
- [API 设计](../api/api_spec.md)
- [UI 设计](../ui/ui_design.md)
- [数据模型](../specs/data_models.md)

## AI 工作区文档
- [日志索引](./logs/log_index.md)
- [经验索引](./experience/experience_index.md)
- [编码标准](./guides/coding_standards.md)
- [测试指南](./guides/testing_guide.md)

## 当前焦点
- [正在进行的工作]
- [待解决的问题]
- [下一步计划]

## 最近更新
- [日期]: [更新内容]
- [日期]: [更新内容]
```

#### 2.3.2 日志索引文档 `logs/log_index.md`

日志的导航中心，按时间组织，避免日志过多导致混乱：

```markdown
# 工作日志索引

## 最新日志
- [今日日志](./YYYY-MM/YYYY-MM-DD.md)
- [昨日日志](./YYYY-MM/YYYY-MM-DD.md)
- [本周总结](./YYYY-MM/week_summary.md)

## 按月归档
### YYYY年MM月
- [DD日](./YYYY-MM/YYYY-MM-DD.md)
- [DD日](./YYYY-MM/YYYY-MM-DD.md)
- [第X周总结](./YYYY-MM/week_X_summary.md)

### YYYY年MM月
- [DD日](./YYYY-MM/YYYY-MM-DD.md)
- [DD日](./YYYY-MM/YYYY-MM-DD.md)

## 里程碑日志
- [项目初始化完成](./YYYY-MM/YYYY-MM-DD.md#初始化完成)
- [首个功能模块发布](./YYYY-MM/YYYY-MM-DD.md#功能发布)
```

#### 2.3.3 快速恢复指南 `recovery/quick_guide.md`

针对 AI 上下文丢失设计的快速恢复文档：

```markdown
# 快速恢复指南

## 立即行动步骤
1. 阅读本文档
2. 查看 [项目当前状态](../state/current_state.md)
3. 检查 [最新工作日志](../logs/YYYY-MM/YYYY-MM-DD.md)
4. 找到当前任务相关的上下文快照

## 核心项目信息
- 项目名称：[项目名]
- 项目代号：[代号]
- 当前阶段：[阶段名]
- 技术栈：[核心技术]

## 关键文档位置
- 项目规格：[路径]
- API 文档：[路径]
- 数据模型：[路径]

## 当前工作上下文
- 当前任务：[任务描述]
- 相关文件：[文件列表]
- 进行中的问题：[问题描述]

## 状态口令使用指南
- 格式：[项目代号-阶段代码-状态正常]
- 示例：[CryptoBot-DEV-状态正常]
- 位置：每次响应的结尾
```

#### 2.3.4 当前状态文档 `state/current_state.md`

实时反映项目当前状态的核心文档：

```markdown
# 项目当前状态

## 基本信息
- 更新时间：[时间戳]
- 当前阶段：[阶段名]
- 总体完成度：[百分比]

## 当前迭代信息
- 迭代名称：[迭代名]
- 迭代目标：[目标描述]
- 开始日期：[日期]
- 计划结束：[日期]
- 当前进度：[百分比]

## 活跃任务
| ID  | 任务名称 | 优先级 | 状态   | 负责人 | 开始日期 | 目标完成 |
| --- | -------- | ------ | ------ | ------ | -------- | -------- |
| T1  | [任务名] | 高     | 进行中 | [人员] | [日期]   | [日期]   |
| T2  | [任务名] | 中     | 待开始 | [人员] | [日期]   | [日期]   |

## 组件状态
| 组件名 | 完成度 | 状态   | 最后更新 | 关联文件 |
| ------ | ------ | ------ | -------- | -------- |
| [组件] | 80%    | 开发中 | [日期]   | [文件]   |
| [组件] | 100%   | 已完成 | [日期]   | [文件]   |

## 已知问题与挑战
1. [问题描述] - 影响：[影响范围] - 优先级：[优先级]
2. [问题描述] - 影响：[影响范围] - 优先级：[优先级]

## 决策记录
- [日期]: [决策描述]
- [日期]: [决策描述]

## 下一步计划
1. [短期计划]
2. [中期计划]
3. [长期计划]
```

#### 2.3.5 日常工作日志 `logs/YYYY-MM/YYYY-MM-DD.md`

记录每日工作进展，格式简洁明了：

```markdown
# YYYY-MM-DD 工作日志

## 今日概述
- 焦点：[主要工作内容]
- 完成度：[进展评估]
- 状态：[状态总结]

## 已完成工作
- [任务1]: [简短描述 + 相关文件链接]
- [任务2]: [简短描述 + 相关文件链接]

## 遇到的问题
- [问题1]: 
  - 描述：[简要描述]
  - 状态：[已解决/进行中/待解决]
  - 解决方案：[如已解决]
  - 参考：[相关链接]

- [问题2]:
  - 描述：[简要描述]
  - 状态：[已解决/进行中/待解决]

## 关键决策
- [决策1]: [决策内容及理由]
- [决策2]: [决策内容及理由]

## 学习点
- [学习点1]: [简洁描述]
- [学习点2]: [简洁描述]

## 明日计划
- [计划任务1]
- [计划任务2]

## 备注
[任何其他需要记录的信息]
```

#### 2.3.6 经验文档模板 `experience/technical/topic_name.md`

结构化记录解决问题的经验：

```markdown
# [问题或技术主题]

## 问题描述
[清晰描述问题的症状和上下文]

## 环境信息
- 技术栈：[相关技术]
- 发生阶段：[项目阶段]
- 首次发现：[日期]

## 根本原因
[分析问题的根本原因]

## 解决方案
[详细的解决步骤]

## 预防措施
[如何避免此类问题再次发生]

## 相关资源
- [链接或参考资料]
- [相关代码示例]

## 标签
#技术类别 #具体技术 #问题类型
```

### 2.4 文档管理原则

1. **只读性原则**：
   - 参考文档（`docs/specs/`, `docs/api/`, `docs/ui/`）严格保持只读
   - 如需修改参考文档，必须通过正式变更流程并明确记录

2. **简洁性原则**：
   - 日志和文档保持简洁明了，避免冗长
   - 使用链接和引用而非复制大段内容

3. **结构化原则**：
   - 所有文档使用一致的格式和结构
   - 使用标题、列表、表格等使内容易于扫描和查找

4. **更新频率原则**：
   - 项目状态文档：每个工作日结束时更新
   - 日志：每个会话结束时更新
   - 索引文档：每周更新
   - 经验文档：解决问题后立即创建

## 3. AI 状态维护机制

### 3.1 状态口令系统

#### 3.1.1 标准口令格式

```
[项目代号-阶段代码-状态等级]
```

其中：
- **项目代号**：项目简称或代号，如 `CryptoBot`
- **阶段代码**：项目当前阶段的简称，如 `DEV`（开发）、`INT`（整合）、`REV`（评审）
- **状态等级**：
  - `状态正常`：AI 完全理解当前上下文和项目状态
  - `状态部分模糊`：AI 对部分上下文有疑问但仍能工作
  - `状态需恢复`：AI 需要重新获取上下文信息

#### 3.1.2 口令使用规范

1. **位置**：口令必须放在每次 AI 响应的结尾
2. **验证**：用户每次检查口令确保 AI 状态正常
3. **递进机制**：
   - 如果连续两次回复包含 `状态部分模糊`，则自动进入恢复流程
   - 一旦出现 `状态需恢复`，立即启动恢复流程

#### 3.1.3 状态检测问题

口令仅适用于 AI 自身能够识别的状态问题。对于 AI 无法自我感知的问题（如不自知的错误理解），需要用户主动检测和干预。常见信号包括：

- AI 提供与项目需求明显不符的代码或建议
- AI 忘记之前讨论的重要决策
- AI 反复提出已解决的问题
- AI 建议使用不符合项目技术栈的技术

### 3.2 上下文快照机制

为解决长期项目中的上下文丢失问题，定期创建上下文快照：

#### 3.2.1 快照内容

上下文快照是当前工作环境的浓缩摘要，包括：

1. 当前任务和目标
2. 相关文件和代码片段
3. 正在讨论的问题和决策
4. 短期计划和任务优先级

#### 3.2.2 快照触发条件

在以下情况下创建快照：

- 完成重要功能或模块
- 做出关键设计决策
- 解决复杂问题
- 每周定期创建（周末）

#### 3.2.3 快照使用方法

当需要恢复上下文时：

1. 参考最新的上下文快照
2. 将快照内容作为新会话的初始上下文
3. 验证 AI 是否正确理解上下文

### 3.3 恢复流程

#### 3.3.1 轻度恢复（状态部分模糊）

当 AI 状态口令显示 `状态部分模糊` 时：

```
我注意到你的状态为"部分模糊"，请参考以下信息恢复上下文：

1. 当前任务：[简要描述当前任务]
2. 关键背景：[提供必要的背景信息]
3. 相关文件：[列出相关文件]

请查看 [项目索引文档](docs/ai_workspace/index.md) 获取全局视图，
并确认你已恢复状态。
```

#### 3.3.2 完全恢复（状态需恢复）

当 AI 状态完全丢失或口令显示 `状态需恢复` 时：

```
需要进行完整状态恢复。请按顺序执行以下步骤：

1. 阅读 [快速恢复指南](docs/ai_workspace/recovery/quick_guide.md)
2. 查看 [项目当前状态](docs/ai_workspace/state/current_state.md)
3. 检查 [最新工作日志](docs/ai_workspace/logs/YYYY-MM/YYYY-MM-DD.md)
4. 参考 [上下文快照](docs/ai_workspace/recovery/context_snapshots/最新快照.md)

完成后，请总结你对项目的理解，并在回复中包含正确的状态口令。
```

#### 3.3.3 定期状态验证

即使没有明显的状态问题，也应定期验证 AI 状态：

- 在开始新功能前验证对项目的理解
- 在解决复杂问题前确认技术栈理解
- 长时间会话（>1小时）中间检查状态

## 4. 文件操作安全策略

### 4.1 文件操作黄金规则

基于项目经验，制定以下文件操作规则：

#### 4.1.1 核心规则：使用 `edit_file` 工具

**重要**：所有文件创建和编辑操作必须使用 `edit_file` 工具而非命令行操作。

正确示例：
```
edit_file(
  target_file="path/to/file.md",
  instructions="创建/更新文件内容",
  code_edit="完整的文件内容"
)
```

错误示例（避免使用）：
```
echo "# 文档标题" > document.md
```

#### 4.1.2 验证规则

每次文件操作后必须立即验证内容：

```
// 在命令行或Cursor终端中
cat path/to/file.md  // 验证文件内容
```

#### 4.1.3 分块处理大型文件

对于大型文件：

1. 将文件分成合理大小的块
2. 逐块处理和验证
3. 保持文件结构和格式一致性

#### 4.1.4 备份策略

重要文件编辑前进行备份：

```
// 创建备份
cp important_file.md important_file.md.bak

// 编辑后比较
diff important_file.md important_file.md.bak
```

### 4.2 安全文件操作流程

#### 4.2.1 文件创建流程

1. 使用 `edit_file` 创建文件
2. 验证文件内容
3. 更新相关索引文档
4. 如适用，将文件添加到版本控制

#### 4.2.2 文件更新流程

1. 确认文件当前内容
2. 准备更新内容
3. 使用 `edit_file` 更新文件
4. 验证更新内容
5. 记录重要更改

#### 4.2.3 结构化文档增量更新

对于有明确结构的文档，使用定位点进行增量更新：

```
edit_file(
  target_file="structured_doc.md",
  instructions="在'## 组件状态'部分添加新组件",
  code_edit="## 组件状态
| 组件名  | 完成度 | 状态   | 最后更新   | 关联文件 |
| ------- | ------ | ------ | ---------- | -------- |
| 组件A   | 80%    | 开发中 | 2023-01-15 | file.js  |
| 组件B   | 100%   | 已完成 | 2023-01-10 | other.js |
| 新组件C | 20%    | 开发中 | 2023-01-20 | new.js   | // 新增行 |
"
)
```

## 5. 阶段性工作流程

### 5.1 项目讨论阶段工作流

此阶段尚无固定文档，重点是形成项目概念和需求：

#### 5.1.1 会话结构

```
【项目讨论 - 主题】
- 讨论目标：[明确此次讨论要解决的问题]
- 背景信息：[相关上下文]
- 约束条件：[预算、时间、技术限制等]
- 期望输出：[具体的输出期望]
```

#### 5.1.2 讨论阶段文档管理

1. **创建简单的文档结构**：
   - `project_concept.md`：项目概念文档
   - `requirements_draft.md`：需求草稿
   - `tech_exploration.md`：技术探索记录

2. **保持灵活性**：
   - 使用轻量级格式
   - 关注创意捕捉而非结构完整性
   - 标记不确定项和假设

#### 5.1.3 讨论阶段提示词模板

```
角色：请作为有丰富经验的[领域]项目顾问。

背景：我正在探索[项目概念]的可行性，目标用户是[目标用户]，
希望解决[核心问题]。

约束：
- 预算约[预算范围]
- 时间限制[时间范围]
- 技术偏好/限制[技术限制]

讨论要点：
1. [要点1]
2. [要点2]
3. [要点3]

期望输出：
- 技术方案建议
- 关键风险评估
- 项目规模和复杂度估计
- 可行的项目路线图

请提供专业意见，不需要过于详细，我们处于项目早期探索阶段。
```

### 5.2 规划阶段工作流

规划阶段专注于将初步概念转化为明确的规格和设计文档：

#### 5.2.1 初始化 AI 工作区

1. 创建基本工作区结构：
   ```
   docs/
   ├── specs/          # 用户创建的规格文档
   └── ai_workspace/   # AI 工作区
       ├── index.md    # 主索引
       ├── state/      # 状态文档
       └── logs/       # 初始日志
   ```

2. 生成初始索引文档，指向关键规格文档

#### 5.2.2 规划阶段提示词模板

```
角色：请作为一位精通[技术栈]的系统架构师和规划专家。

项目：[项目名称]处于规划阶段，我们已有初步需求和概念设计。

参考文档：
- 需求文档：docs/specs/requirements.md
- 概念设计：docs/specs/concept.md

任务：请帮助我们完成以下规划工作：
1. [具体规划任务，如系统架构设计]
2. [数据模型设计]
3. [API 接口设计]

要求：
- 遵循[行业标准/最佳实践]
- 考虑[可扩展性/安全性/性能]要求
- 提供清晰的图表或结构化描述

请在回复中包含正确的状态口令：[项目代号-PLAN-状态正常]
```

#### 5.2.3 规划阶段典型输出

此阶段的主要输出是一系列设计文档，包括：

1. 系统架构文档
2. 数据模型设计
3. API 设计规范
4. UI/UX 设计指南
5. 技术栈选型报告
6. 项目路线图

### 5.3 初始化阶段工作流

此阶段将规划转化为实际项目骨架，建立基础设施和开发环境：

#### 5.3.1 完整文档结构建立

创建完整的项目和文档结构：

1. 建立源代码目录结构
2. 完善 AI 工作区文档体系
3. 设置版本控制和自动化脚本

#### 5.3.2 初始化阶段提示词模板

```
角色：请作为精通[技术栈]的高级开发工程师和项目初始化专家。

项目：[项目名称]已完成规划阶段，现在需要进行初始化。

参考文档：
- 架构设计：docs/specs/architecture.md
- 技术栈：docs/specs/tech_stack.md

初始化任务：
1. [创建项目骨架]
2. [设置开发环境]
3. [初始化核心模块]
4. [配置测试框架]

要求：
- 严格遵循项目规定的技术栈
- 建立清晰的模块化结构
- 实现基础脚手架代码
- 确保所有初始测试通过

请在工作过程中维护适当的文档，并在回复中包含状态口令：
[项目代号-INIT-状态正常]
```

#### 5.3.3 项目初始化清单

确保初始化阶段完成以下任务：

1. 项目基础结构搭建
2. 依赖项配置和管理
3. 开发、测试和生产环境配置
4. 基础架构组件实现
5. CI/CD 管道设置
6. 代码规范和格式化配置
7. 初始单元测试设置
8. 文档系统完善

### 5.4 开发阶段工作流

开发阶段是项目的核心阶段，专注于功能实现和迭代：

#### 5.4.1 功能开发循环

1. **功能分解**：将功能分解为可管理的任务
2. **任务规划**：确定任务优先级和依赖关系
3. **实现**：编码和单元测试
4. **审查**：代码审查和修订
5. **集成**：将功能集成到主代码库
6. **文档**：更新相关文档

#### 5.4.2 开发阶段提示词模板

```
角色：请作为熟练掌握[技术栈]的开发工程师。

项目：[项目名称]正处于开发阶段，当前迭代目标是[迭代目标]。

参考文档：
- 当前状态：docs/ai_workspace/state/current_state.md
- 功能规格：docs/specs/features/[功能名].md

开发任务：
- 功能描述：[详细描述]
- 验收标准：[标准列表]
- 技术约束：[相关约束]

相关代码：
```
[相关代码片段]
```

请提供：
1. 功能实现方案
2. 完整的代码实现
3. 单元测试示例
4. 可能的边缘情况处理

请确保代码符合项目编码标准，并在回复中使用正确的状态口令：
[项目代号-DEV-状态正常]
```

#### 5.4.3 开发文档更新重点

开发过程中需重点更新以下文档：

1. 每日工作日志（`logs/YYYY-MM/YYYY-MM-DD.md`）
2. 组件状态（`state/component_status.md`）
3. 当前状态文档（`state/current_state.md`）
4. 代码注释和内联文档
5. 技术经验文档（根据需要）

### 5.5 整合阶段工作流

整合阶段处理子系统的整合、冲突解决和系统级测试：

#### 5.5.1 整合重点任务

1. 识别和解决组件间冲突
2. 调整接口和依赖关系
3. 执行集成测试
4. 分析和优化性能
5. 解决整合过程中发现的技术债务

#### 5.5.2 整合阶段提示词模板

```
角色：请作为系统整合专家和[技术栈]高级工程师。

项目：[项目名称]已进入整合阶段，需要解决组件间整合问题。

参考资料：
- 组件状态：docs/ai_workspace/state/component_status.md
- 架构文档：docs/specs/architecture.md

整合任务：
- 需要整合的组件：[组件列表]
- 已发现的冲突：[冲突描述]
- 性能问题：[问题描述]

相关代码：
```
[相关代码片段]
```

请提供：
1. 冲突分析和解决方案
2. 必要的重构建议
3. 接口调整方案
4. 性能优化建议

注意确保系统整体一致性和稳定性，并在回复中包含状态口令：
[项目代号-INT-状态正常]
```

#### 5.5.3 整合测试策略

创建针对整合阶段的测试策略：

1. 组件间交互测试
2. 端到端测试场景
3. 性能基准测试
4. 负载测试（如适用）
5. 错误处理和恢复测试

### 5.6 评审阶段工作流

评审阶段重点是质量保证、代码审查和准备发布：

#### 5.6.1 评审重点

1. 全面代码审查
2. 安全评估
3. 性能评估
4. 文档完整性检查
5. 用户体验测试
6. 回归测试

#### 5.6.2 评审阶段提示词模板

```
角色：请作为资深的代码审查专家和质量保证工程师。

项目：[项目名称]进入评审阶段，我们需要全面评估代码质量和就绪状态。

审查范围：
- 模块：[模块名称]
- 文件：[文件列表或路径模式]

审查重点：
- 代码质量与最佳实践
- 安全漏洞与防护措施
- 性能优化机会
- 文档完整性
- 测试覆盖率
- 遵循项目技术标准

代码示例：
```
[需要审查的代码片段]
```

请提供：
1. 全面的代码审查报告
2. 具体问题及严重程度分级
3. 改进建议（包括示例）
4. 发布准备度评估

请确保审查全面且建设性，并在回复中包含状态口令：
[项目代号-REV-状态正常]
```

#### 5.6.3 预发布检查清单

创建预发布检查清单，包含以下要素：

1. 功能完整性验证
2. 兼容性测试结果
3. 性能测试结果
4. 安全漏洞扫描结果
5. 用户文档完整性
6. 已知问题和解决计划
7. 回滚计划

### 5.7 发布与维护阶段工作流

发布后的工作重点是监控、维护和小型更新：

#### 5.7.1 发布流程

1. 最终验收测试
2. 部署准备（环境配置、数据迁移）
3. 部署执行
4. 部署验证
5. 监控设置

#### 5.7.2 维护阶段提示词模板

```
角色：请作为[技术栈]维护专家和支持工程师。

项目：[项目名称]已发布并处于维护阶段。

任务类型：
- [ ] Bug修复
- [ ] 小功能增强
- [ ] 性能优化
- [ ] 安全补丁
- [ ] 文档更新

问题/需求描述：
[详细描述问题或需求]

环境信息：
- 版本：[当前版本]
- 环境：[环境信息]
- 影响范围：[影响范围]

相关代码：
```
[相关代码片段]
```

期望输出：
1. 根本原因分析（针对Bug）
2. 解决方案或实现方案
3. 向后兼容性考虑
4. 测试建议
5. 部署注意事项

请确保修改最小化且具有高稳定性，并在回复中包含状态口令：
[项目代号-MAINT-状态正常]
```

#### 5.7.3 版本发布文档

每次发布都需要维护以下文档：

1. 发布说明 (`release_notes.md`)
2. 变更日志 (`changelog.md`)
3. 已知问题列表 (`known_issues.md`)
4. 部署指南更新 (`deployment_guide.md`)

## 6. 日常开发工作流

### 6.1 会话开始流程

每次与 AI 开始新会话时：

#### 6.1.1 状态同步模板

```
【项目状态同步】

项目：[项目名称]
当前阶段：[当前阶段]
当前任务：[具体任务]

状态文档：docs/ai_workspace/state/current_state.md
最新日志：docs/ai_workspace/logs/YYYY-MM/YYYY-MM-DD.md

本次会话目标：
1. [明确的目标1]
2. [明确的目标2]

相关文件：
- [文件路径1]
- [文件路径2]

请在回复中确认你已理解项目上下文，并使用状态口令：
[项目代号-阶段代码-状态正常]
```

#### 6.1.2 会话类型标识

为不同目的的会话添加明确标识：

- **功能开发会话**：专注于实现新功能
- **问题排查会话**：针对特定问题的诊断和解决
- **代码审查会话**：代码审查和改进
- **文档会话**：文档创建和更新
- **规划会话**：项目或功能规划

示例：
```
【问题排查会话】
问题：[问题简述]
症状：[详细症状]
...
```

### 6.2 开发任务执行

#### 6.2.1 任务分解示例

对于复杂任务：

```
请帮助我将"实现用户认证系统"任务分解为更小的子任务，包括：
1. 必要的数据模型和存储
2. 核心功能和API
3. 安全考虑
4. 单元测试要求
5. 必要的文档更新

每个子任务应有明确的完成标准和依赖关系。
```

#### 6.2.2 代码实现流程

1. **设计讨论**：明确实现方案和模式
2. **骨架代码**：创建基本结构
3. **核心功能**：实现主要功能
4. **单元测试**：添加测试用例
5. **边缘情况**：处理异常和边缘情况
6. **文档**：添加代码文档和注释

#### 6.2.3 分支工作方式

使用功能分支工作流程：

```
// 创建功能分支
git checkout -b feature/authentication

// 小步提交工作
git add .
git commit -m "feat: add user model and schema"

// 推送分支
git push origin feature/authentication
```

### 6.3 会话结束流程

每次会话结束前：

#### 6.3.1 会话总结模板

```
请总结本次会话的主要成果：

1. 已完成的任务：
   - [任务1]
   - [任务2]

2. 重要决策：
   - [决策1]
   - [决策2]

3. 遇到的问题及解决方案：
   - [问题1]：[解决方案]
   - [问题2]：[解决方案]

4. 下一步计划：
   - [下一步任务1]
   - [下一步任务2]

5. 需要更新的文档：
   - [文档1]
   - [文档2]
```

#### 6.3.2 状态更新流程

1. 更新工作日志：
   ```
   edit_file(
     target_file="docs/ai_workspace/logs/YYYY-MM/YYYY-MM-DD.md",
     instructions="添加今日工作总结",
     code_edit="# YYYY-MM-DD 工作日志

   ## 今日概述
   - 焦点：[主要工作内容]
   - 完成度：[进展评估]
   - 状态：[状态总结]

   ## 已完成工作
   - [任务1]: [简短描述 + 相关文件链接]
   - [任务2]: [简短描述 + 相关文件链接]

   ## 遇到的问题
   - [问题1]: 
     - 描述：[简要描述]
     - 状态：已解决
     - 解决方案：[解决方案]

   ## 关键决策
   - [决策1]: [决策内容及理由]

   ## 学习点
   - [学习点1]: [简洁描述]

   ## 明日计划
   - [计划任务1]
   - [计划任务2]
   "
   )
   ```

2. 更新项目状态文档（如有重大进展）:
   ```
   edit_file(
     target_file="docs/ai_workspace/state/current_state.md",
     instructions="更新组件状态部分",
     code_edit="## 组件状态
   | 组件名   | 完成度 | 状态   | 最后更新   | 关联文件 |
   | -------- | ------ | ------ | ---------- | -------- |
   | 认证系统 | 80%    | 开发中 | YYYY-MM-DD | auth/*   |
   | 用户管理 | 100%   | 已完成 | YYYY-MM-DD | users/*  |
   "
   )
   ```

3. 如有新的经验，创建经验文档

#### 6.3.3 代码提交与集成

会话结束后进行代码整理和提交：

1. 确保所有测试通过
2. 代码格式化符合规范
3. 准备有意义的提交信息
4. 提交并推送到功能分支
5. 如功能完成，创建合并请求

## 7. AI 协作增强技术

### 7.1 高效提示工程

#### 7.1.1 提示结构化法

使用结构化提示模式提高效率：

```
【指令类型】：[具体指令，如"分析"、"生成"、"优化"]

【上下文】：
- 项目：[项目信息]
- 任务：[任务背景]
- 限制：[限制条件]

【输入】：
```
[代码或内容]
```

【期望】：
1. [具体期望1]
2. [具体期望2]

【输出格式】：
[期望的输出结构或格式]
```

#### 7.1.2 任务聚焦技术

使用任务聚焦技术避免范围蔓延：

1. **单一责任提示**：每个提示专注于一个明确任务
2. **范围限定标记**：明确标识任务范围和边界
3. **迭代改进**：先获取基础解决方案，再逐步细化

示例：
```
【聚焦任务】：优化以下函数性能

【范围】：仅优化内部算法，不改变函数签名和行为

【当前实现】：
```
[函数代码]
```

请首先提供基础优化版本，然后我们可以进一步讨论具体改进点。
```

#### 7.1.3 概念澄清模式

使用概念澄清减少误解：

```
【概念澄清】

在继续之前，请确认我们对以下概念的理解一致：

1. "微服务架构"在本项目中是指：[项目中的定义]
2. "实时处理"我们的标准是：[具体标准，如延迟<100ms]
3. "可扩展API"需要满足：[具体要求]

请确认这些定义，或提供更准确的理解。
```

### 7.2 会话一致性技术

#### 7.2.1 上下文接力

在长期工作中使用上下文接力保持连续性：

```
【上下文接力】

我们继续昨天关于[主题]的讨论。上次会话的关键成果：

1. 我们决定使用[技术方案]
2. 我们已经实现了[功能列表]
3. 我们遇到了[问题]并计划[解决方案]

请参考：
- 上次工作日志：docs/ai_workspace/logs/YYYY-MM/YYYY-MM-DD.md
- 当前状态：docs/ai_workspace/state/current_state.md

今天我们将专注于：
1. 解决[问题]
2. 实现[新功能]
```

#### 7.2.2 针对性会话重点

在处理特定问题时，使用会话重点提高效率：

```
【会话重点】：解决数据库查询性能问题

【问题摘要】：用户列表查询在数据量超过10,000条时性能下降

【相关代码】：
```
[代码片段]
```

请将讨论限制在数据库查询优化范围内，暂不考虑UI或其他系统组件的改动。
```

#### 7.2.3 角色一致性

为特定任务设置一致的 AI 角色：

```
【角色设定】：请作为资深的数据库性能优化专家，专注于PostgreSQL性能调优。

【你具备的知识】：
- 深入了解PostgreSQL查询计划和优化
- 精通索引策略和高级查询技术
- 有处理大规模数据性能问题的经验

【任务背景】：[问题描述]
```

### 7.3 跨会话知识管理

#### 7.3.1 决策日志机制

记录重要决策，便于日后参考：

```
edit_file(
  target_file="docs/ai_workspace/state/decisions.md",
  instructions="添加新的决策记录",
  code_edit="# 项目决策日志

## YYYY-MM-DD: [决策标题]

**背景**：[决策背景和原因]

**备选方案**：
1. [方案1]
2. [方案2]
3. [方案3]

**决定**：选择方案2，因为[理由]

**影响**：这一决定会影响[影响范围]

**参与者**：[参与决策的人员]
"
)
```

#### 7.3.2 知识提取机制

从会话中提取重要知识点：

```
请从我们今天的讨论中提取关键知识点：

1. 技术发现：[技术相关发现]
2. 最佳实践：[发现的最佳实践]
3. 常见问题：[识别的常见问题]
4. 解决方案模式：[可复用的解决方案]

提取的知识将添加到我们的经验库中。
```

#### 7.3.3 学习点注释标准

在代码中使用统一的学习点注释格式：

```javascript
/**
 * 复杂函数说明
 * 
 * @学习点 设计模式：这里使用了观察者模式实现事件处理
 * @学习点 性能考量：使用了记忆化技术避免重复计算
 * @学习点 错误处理：采用错误边界模式集中处理异常
 */
function complexFunction() {
  // 实现...
  
  // @学习点 异步处理：使用Promise.all并行处理多个异步操作
  const results = await Promise.all(promises);
  
  return results;
}
```

## 8. 项目质量保障

### 8.1 代码质量保障

#### 8.1.1 AI辅助代码审查

使用 AI 进行深度代码审查：

```
【代码审查请求】

请对以下代码进行全面审查：

```
[代码片段]
```

审查重点：
1. 代码质量与最佳实践
2. 潜在的错误和边缘情况
3. 性能优化机会
4. 安全考量
5. 可读性和可维护性
6. 技术栈一致性

请提供：
- 分级问题列表（关键/重要/次要）
- 具体改进建议
- 代码示例（如适用）
```

#### 8.1.2 测试策略设计

设计全面的测试策略：

```
请帮我为[组件/功能]设计测试策略，包括：

1. 单元测试：
   - 关键函数测试用例
   - 边缘情况覆盖
   - 模拟依赖

2. 集成测试：
   - 组件交互测试
   - API契约测试
   - 数据流测试

3. 端到端测试：
   - 关键用户流程
   - 性能测试点
   - 错误情况模拟

请为每种测试类型提供具体示例。
```

#### 8.1.3 定期代码健康检查

实施定期代码健康检查：

```
【代码健康检查】

请对[模块/目录]进行健康检查，分析：

1. 代码复杂度热点
2. 重复代码段
3. 过长或过复杂的函数
4. 潜在的内存泄漏
5. 废弃API使用
6. 非标准模式

输出健康报告和改进建议优先级列表。
```

### 8.2 文档质量保障

#### 8.2.1 文档一致性检查

定期检查文档一致性：

```
请检查以下文档之间的一致性：

1. API规格文档：docs/specs/api/
2. 前端API客户端：src/api/
3. 后端API实现：src/controllers/

识别任何不一致之处，特别是：
- 参数名称和类型
- 返回值结构
- 错误处理
- 端点路径
- 认证要求
```

#### 8.2.2 文档清晰度评估

评估文档清晰度和完整性：

```
请评估以下文档的清晰度和完整性：

文档：[文档路径]

评估维度：
1. 目标受众明确性（1-5分）
2. 结构组织逻辑性（1-5分）
3. 示例的充分性（1-5分）
4. 术语使用一致性（1-5分）
5. 内容更新及时性（1-5分）

请提供具体改进建议。
```

#### 8.2.3 自动文档生成

利用 AI 辅助生成和更新文档：

```
【文档生成请求】

根据以下源代码生成规范的API文档：

```
[相关代码]
```

文档要求：
- 遵循REST API文档标准
- 包含完整的参数和返回值描述
- 包含请求/响应示例
- 说明错误处理和状态码
- 标注身份验证要求
```

### 8.3 项目健康监控

#### 8.3.1 项目脉搏检查

定期执行项目健康检查：

```
【项目脉搏检查】

请基于以下指标评估项目当前健康状态：

1. 代码提交频率：[数据]
2. 测试覆盖率趋势：[数据]
3. 未解决问题数量：[数据]
4. 技术债务估计：[数据]
5. 文档更新频率：[数据]

对比目标指标，提供健康评分和改进建议。
```

#### 8.3.2 风险预警系统

建立风险预警机制：

```
【风险评估】

请分析以下项目数据，识别潜在风险信号：

1. 进度数据：[数据]
2. 质量指标：[数据]
3. 团队反馈：[数据]
4. 技术挑战：[数据]

请计算风险评分，并提供预防措施建议。
```

#### 8.3.3 变更影响分析

评估变更的潜在影响：

```
【变更影响分析】

计划变更：[描述计划的变更]

请分析此变更可能产生的影响：

1. 对依赖组件的影响
2. 对性能的影响
3. 对安全性的影响
4. 对用户体验的影响
5. 对维护难度的影响

提供风险缓解建议和回滚计划。
```

## 9. 工作流演进与适应

### 9.1 工作流程评估

定期评估工作流程有效性：

```
【工作流程评估】

请评估我们当前的工作流程效果：

1. 文档管理：[观察到的优点和问题]
2. 状态维护：[观察到的优点和问题]
3. 任务管理：[观察到的优点和问题]
4. 代码质量：[观察到的优点和问题]
5. 知识积累：[观察到的优点和问题]

请提供具体的改进建议和实施步骤。
```

### 9.2 新技术整合

评估和整合新技术：

```
【技术评估请求】

请评估[新技术/工具]对我们工作流程的潜在价值：

1. 主要功能与优势：[描述]
2. 与我们技术栈的兼容性：[分析]
3. 学习曲线和采用成本：[估计]
4. 预期效益：[定量/定性分析]
5. 潜在风险：[识别风险]

建议的试点应用场景和评估指标。
```

### 9.3 团队反馈整合

收集和整合团队反馈：

```
【反馈整合】

基于收集的团队反馈：

1. 积极反馈：[列出积极反馈]
2. 挑战和问题：[列出问题]
3. 改进建议：[列出建议]

请分析根本原因并提出具体的工作流程调整建议。
```

# 10. 附录：快速参考

## 10.1 状态口令参考

项目各阶段的状态口令格式：

| 阶段       | 阶段代码 | 状态口令格式              | 示例                       |
| ---------- | -------- | ------------------------- | -------------------------- |
| 讨论阶段   | DISC     | [项目代号-DISC-状态等级]  | [CryptoBot-DISC-状态正常]  |
| 规划阶段   | PLAN     | [项目代号-PLAN-状态等级]  | [CryptoBot-PLAN-状态正常]  |
| 初始化阶段 | INIT     | [项目代号-INIT-状态等级]  | [CryptoBot-INIT-状态正常]  |
| 开发阶段   | DEV      | [项目代号-DEV-状态等级]   | [CryptoBot-DEV-状态正常]   |
| 整合阶段   | INT      | [项目代号-INT-状态等级]   | [CryptoBot-INT-状态正常]   |
| 评审阶段   | REV      | [项目代号-REV-状态等级]   | [CryptoBot-REV-状态正常]   |
| 发布阶段   | REL      | [项目代号-REL-状态等级]   | [CryptoBot-REL-状态正常]   |
| 维护阶段   | MAINT    | [项目代号-MAINT-状态等级] | [CryptoBot-MAINT-状态正常] |

状态等级分类：
- **状态正常**：AI完全理解项目上下文
- **状态部分模糊**：AI对部分上下文不确定
- **状态需恢复**：AI需要完整重建上下文

## 10.2 核心文件操作命令

### 10.2.1 安全文件创建与编辑

**使用`edit_file`工具创建/编辑文件**（首选方法）：
```
edit_file(
  target_file="path/to/file.md",
  instructions="创建/更新文件内容",
  code_edit="完整文件内容"
)
```

**分块处理大型文件**：
```
edit_file(
  target_file="large_document.md",
  instructions="更新第3节的内容",
  code_edit="## 3. 特定章节
  
更新后的内容...

## 4. 下一章节（保持不变）"
)
```

### 10.2.2 强制验证操作

**验证文件内容**：
```bash
cat path/to/file.md  # Linux/Git Bash
```
或
```powershell
Get-Content -Path path/to/file.md  # PowerShell
```

**检查文件是否存在**：
```bash
ls -la path/to/file.md  # Linux/Git Bash
```
或
```powershell
Test-Path path/to/file.md  # PowerShell
```

### 10.2.3 备份与恢复

**创建文件备份**：
```bash
cp important_file.md important_file.md.bak
```

**比较文件差异**：
```bash
diff file.md file.md.bak  # Linux/Git Bash
```
或
```powershell
Compare-Object (Get-Content file.md) (Get-Content file.md.bak)  # PowerShell
```

## 10.3 状态恢复快速流程

### 10.3.1 轻度恢复（状态部分模糊）

使用以下模板快速恢复部分上下文：

```
我注意到你的状态为"部分模糊"，让我们快速同步：

1. 项目：[项目名称]
2. 当前阶段：[当前阶段]
3. 技术栈：[核心技术列表]
4. 当前任务：[简述当前任务]

请查看以下文件复习项目上下文：
- docs/ai_workspace/index.md（主索引文档）
- docs/ai_workspace/state/current_state.md（当前状态）
- docs/ai_workspace/logs/最新日志.md（最新工作日志）

恢复后，请在回复中使用正确的状态口令确认。
```

### 10.3.2 完全恢复（状态需恢复）

使用以下模板进行完整上下文恢复：

```
需要进行完整状态恢复。请按顺序执行以下步骤：

1. 查看项目索引文档：docs/ai_workspace/index.md
2. 阅读恢复指南：docs/ai_workspace/recovery/quick_guide.md
3. 读取当前项目状态：docs/ai_workspace/state/current_state.md
4. 检查最新工作日志：docs/ai_workspace/logs/YYYY-MM/YYYY-MM-DD.md
5. 如有需要，查看最近上下文快照：docs/ai_workspace/recovery/context_snapshots/

完成后，请总结你对项目的理解，并在回复中使用正确的状态口令。
```

### 10.3.3 状态验证问题清单

定期使用以下问题验证AI对项目的理解：

1. 项目当前处于哪个阶段？
2. 正在进行的主要任务是什么？
3. 项目使用的核心技术栈有哪些？
4. 最近解决了哪些关键问题？
5. 下一步计划是什么？

## 10.4 常用文档模板索引

常用文档模板快速参考：

| 文档类型 | 文件路径                                              | 主要用途           |
| -------- | ----------------------------------------------------- | ------------------ |
| 日志模板 | docs/ai_workspace/templates/daily_log_template.md     | 记录每日工作       |
| 状态报告 | docs/ai_workspace/templates/status_report_template.md | 生成状态报告       |
| 经验记录 | docs/ai_workspace/templates/experience_template.md    | 记录技术经验       |
| 决策记录 | docs/ai_workspace/templates/decision_template.md      | 记录设计决策       |
| 问题记录 | docs/ai_workspace/templates/issue_template.md         | 记录问题与解决方案 |
| 会议记录 | docs/ai_workspace/templates/meeting_template.md       | 记录会议内容       |
| 计划文档 | docs/ai_workspace/templates/plan_template.md          | 创建计划文档       |

## 10.5 阶段性任务核对清单

### 10.5.1 项目启动核对清单

- [ ] 理解项目需求和目标
- [ ] 确认技术栈和约束
- [ ] 建立基础项目结构
- [ ] 创建AI工作区文档结构
- [ ] 设置版本控制系统
- [ ] 创建初始项目状态文档
- [ ] 建立工作日志结构

### 10.5.2 开发迭代核对清单

每个开发迭代开始时检查：

- [ ] 更新项目状态文档
- [ ] 明确迭代目标和任务列表
- [ ] 检查依赖和前提条件
- [ ] 确认测试策略和验收标准

每个开发迭代结束时检查：

- [ ] 完成单元测试和集成测试
- [ ] 更新文档反映新功能
- [ ] 记录经验和技术决策
- [ ] 规划下一个迭代目标

### 10.5.3 发布前核对清单

- [ ] 完成所有关键功能测试
- [ ] 解决所有高优先级问题
- [ ] 完成性能和安全测试
- [ ] 完成用户文档和技术文档
- [ ] 准备发布说明和变更日志
- [ ] 确认部署计划和回滚策略
- [ ] 进行最终代码审查

## 10.6 特殊会话提示词集

### 10.6.1 代码生成提示词

```
【代码生成请求】

要实现的功能：[功能描述]

技术约束：
- 语言/框架：[语言和框架]
- 编码规范：[项目编码规范]
- 依赖限制：[允许使用的库和依赖]

输入/输出：
- 输入：[输入描述]
- 输出：[输出描述]
- 错误处理：[错误处理要求]

相关代码：
```
[相关代码或接口]
```

性能考量：
- [性能要求或限制]

请提供：
1. 完整的实现代码
2. 包含学习点的注释
3. 单元测试示例
4. 使用示例
```

### 10.6.2 代码重构提示词

```
【代码重构请求】

需要重构的代码：
```
[原始代码]
```

重构目标：
- [性能优化/可读性提升/模块化/错误处理改进/其他]

约束条件：
- 保持功能不变
- 保持公共API不变
- [其他约束]

问题分析：
- [当前代码的问题]

期望输出：
1. 重构后的代码
2. 重构决策说明
3. 重构的好处分析
4. 测试策略建议
```

### 10.6.3 问题排查提示词

```
【问题排查请求】

问题描述：[详细描述问题的症状]

环境信息：
- 操作系统：[OS]
- 技术栈版本：[具体版本]
- 相关配置：[配置信息]

复现步骤：
1. [步骤1]
2. [步骤2]
...

错误信息：
```
[错误日志或消息]
```

已尝试的解决方案：
1. [尝试1] - 结果：[结果]
2. [尝试2] - 结果：[结果]

期望输出：
1. 可能的根本原因分析
2. 调试步骤建议
3. 潜在解决方案
4. 预防类似问题的建议
```

## 10.7 文件结构参考

完整的 AI 工作区文档结构参考：

```
ai_workspace/
├── index.md                      # 主索引文档
├── recovery/                     # 恢复相关文档
│   ├── quick_guide.md            # 快速恢复指南
│   └── context_snapshots/        # 上下文快照
│       └── YYYY-MM-DD-phase.md   # 特定日期和阶段的快照
├── state/                        # 项目状态文档
│   ├── current_state.md          # 当前项目状态
│   ├── component_status.md       # 组件完成状态
│   ├── decisions.md              # 决策记录
│   └── roadmap.md                # 项目路线图
├── logs/                         # 工作日志
│   ├── log_index.md              # 日志索引
│   └── YYYY-MM/                  # 按月组织的日志文件夹
│       ├── YYYY-MM-DD.md         # 每日工作日志
│       └── week_summary.md       # 周总结
├── experience/                   # 经验积累
│   ├── experience_index.md       # 经验文档索引
│   ├── technical/                # 技术经验
│   │   ├── frontend/             # 前端相关经验
│   │   ├── backend/              # 后端相关经验
│   │   ├── database/             # 数据库相关经验
│   │   └── devops/               # 部署和运维经验
│   ├── process/                  # 流程经验
│   │   ├── development/          # 开发流程经验
│   │   ├── testing/              # 测试流程经验
│   │   └── deployment/           # 部署流程经验
│   └── collaboration/            # 协作经验
│       ├── ai_collaboration/     # AI协作经验
│       └── team_collaboration/   # 团队协作经验
├── guides/                       # AI 工作指南
│   ├── coding_standards.md       # 编码标准
│   ├── testing_guide.md          # 测试指南
│   ├── documentation_guide.md    # 文档编写指南
│   └── phase_guides/             # 阶段性工作指南
│       ├── development_guide.md  # 开发阶段指南
│       ├── integration_guide.md  # 整合阶段指南
│       └── review_guide.md       # 评审阶段指南
└── templates/                    # 文档模板
    ├── daily_log_template.md     # 日志模板
    ├── experience_template.md    # 经验文档模板
    ├── decision_template.md      # 决策记录模板
    └── status_report_template.md # 状态报告模板
```

## 10.8 常见问题快速解决方案

### 10.8.1 AI状态问题解决

| 问题                   | 快速解决方案                               |
| ---------------------- | ------------------------------------------ |
| AI状态口令缺失         | 提醒AI使用状态口令，必要时使用轻度恢复流程 |
| AI对项目理解明显错误   | 使用完全恢复流程，指导AI阅读核心文档       |
| AI建议不符合项目技术栈 | 明确重申技术栈要求，引导AI查阅相关指南     |
| AI无法找到文件或目录   | 提供明确的文件路径，确认文件存在           |
| AI生成的代码风格不一致 | 引导AI查阅编码标准文档，提供清晰示例       |

### 10.8.2 文件操作问题解决

| 问题                | 快速解决方案                                        |
| ------------------- | --------------------------------------------------- |
| 文件创建失败        | 使用`edit_file`工具替代命令行操作                   |
| 文件内容不完整      | 使用备份或版本控制恢复，然后使用`edit_file`重新编辑 |
| 中文文件名/路径问题 | 使用英文文件名，避免路径中的特殊字符                |
| 大型文件编辑问题    | 分解为多个小块逐步编辑，每步都验证内容              |
| 文件格式混乱        | 使用格式化工具修复，然后使用`edit_file`保存         |

### 10.8.3 项目协作问题解决

| 问题           | 快速解决方案                                   |
| -------------- | ---------------------------------------------- |
| 多人修改冲突   | 使用`git pull`同步最新代码，解决冲突后提交     |
| 需求理解不一致 | 更新项目状态文档明确需求，必要时组织讨论会议   |
| 技术决策分歧   | 创建决策记录文档，明确记录决策过程和理由       |
| 开发进度滞后   | 重新评估任务复杂度，分解为更小的任务，调整计划 |
| 文档过时       | 指定专门时间进行文档更新，建立文档审查机制     |

## 10.9 阶段转换核验清单

当项目从一个阶段转入下一个阶段时，使用以下核验清单确保平稳过渡：

### 10.9.1 规划→初始化阶段转换

- [ ] 完成所有关键设计文档
- [ ] 确认技术栈和架构决策
- [ ] 完成数据模型设计
- [ ] 确认API接口定义
- [ ] 建立项目目录结构
- [ ] 更新项目状态文档
- [ ] 创建初始化阶段工作日志
- [ ] 更新状态口令中的阶段代码

### 10.9.2 初始化→开发阶段转换

- [ ] 完成项目骨架搭建
- [ ] 设置开发环境和工具链
- [ ] 确认核心依赖和库
- [ ] 实现基础组件和框架
- [ ] 设置自动化测试框架
- [ ] 建立CI/CD管道
- [ ] 更新项目状态文档
- [ ] 创建开发阶段工作日志
- [ ] 更新状态口令中的阶段代码

### 10.9.3 开发→整合阶段转换

- [ ] 完成所有关键功能模块
- [ ] 通过所有单元测试
- [ ] 记录所有API和接口变更
- [ ] 实现必要的集成测试
- [ ] 解决所有高优先级问题
- [ ] 更新文档反映当前功能
- [ ] 创建整合阶段工作日志
- [ ] 更新状态口令中的阶段代码

### 10.9.4 整合→评审阶段转换

- [ ] 完成所有组件整合
- [ ] 解决所有整合冲突
- [ ] 完成端到端测试
- [ ] 执行性能测试和优化
- [ ] 完成安全审查
- [ ] 准备完整的测试报告
- [ ] 创建评审阶段工作日志
- [ ] 更新状态口令中的阶段代码

### 10.9.5 评审→发布阶段转换

- [ ] 解决所有评审阶段发现的问题
- [ ] 完成用户文档和技术文档
- [ ] 准备发布说明和变更日志
- [ ] 制定部署计划和回滚策略
- [ ] 最终验收测试通过
- [ ] 获得所有必要的发布批准
- [ ] 创建发布阶段工作日志
- [ ] 更新状态口令中的阶段代码

## 10.10 AI协作效率技巧总结

### 10.10.1 提升AI响应质量的技巧

1. **提供明确的上下文**：始终包含必要的项目背景和约束
2. **使用结构化提示**：清晰的格式和明确的指令
3. **增量构建复杂解决方案**：先获取基础方案，再逐步完善
4. **限定范围**：明确任务边界和输出期望
5. **使用一致的术语**：保持术语和概念的一致性
6. **引用相关文档**：指向相关项目文档
7. **优先选择示例**：提供期望输出的示例
8. **验证理解**：要求AI重述理解的任务
9. **定期状态验证**：检查AI对项目的理解
10. **保持工作会话聚焦**：一个会话专注于一个主题

### 10.10.2 高效代码生成技巧

1. **先详细说明功能再编码**：先明确需求和接口
2. **先骨架后细节**：先获取结构，再补充实现细节
3. **功能分块处理**：复杂功能分解为小块开发
4. **测试用例驱动**：先定义测试用例再实现代码
5. **明确代码风格要求**：引用项目编码标准
6. **引用类似代码模式**：指向项目中类似的实现
7. **引导式提问**：对不确定部分进行引导式提问
8. **精确错误描述**：准确描述错误和期望行为

### 10.10.3 高效文档创建技巧

1. **使用文档模板**：利用预定义模板保持一致性
2. **定义明确结构**：事先明确章节和内容要点
3. **先概要后细节**：先创建概要，再填充细节
4. **增量创建**：分步骤创建大型文档
5. **交叉引用**：保持文档间的链接和引用
6. **标准化格式**：使用一致的格式和样式
7. **内容复用**：重用已有文档的相关部分
8. **即时验证**：创建后立即检查内容准确性

## 10.11 项目生命周期快速参考

| 阶段       | 主要活动             | 关键工具               | 主要产出                    |
| ---------- | -------------------- | ---------------------- | --------------------------- |
| 讨论阶段   | 需求探索、可行性分析 | 会议、原型工具         | 概念文档、需求草案          |
| 规划阶段   | 架构设计、技术选型   | 设计工具、文档系统     | 架构文档、API设计、数据模型 |
| 初始化阶段 | 项目搭建、环境配置   | IDE、构建工具          | 项目骨架、CI/CD配置         |
| 开发阶段   | 功能实现、单元测试   | IDE、测试框架          | 功能模块、测试套件          |
| 整合阶段   | 组件整合、冲突解决   | 版本控制、CI系统       | 集成系统、集成测试          |
| 评审阶段   | 代码审查、质量检查   | 代码审查工具、测试工具 | 审查报告、优化建议          |
| 发布阶段   | 发布准备、部署       | 部署工具、监控系统     | 发布包、部署脚本            |
| 维护阶段   | Bug修复、小型更新    | 问题跟踪、监控工具     | 补丁、维护日志              |